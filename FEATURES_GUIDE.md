# MiniTodoApp 优化功能快速开始指南

## 🚀 新增功能使用说明

### 1. 设置提醒（Reminder）

#### 如何使用：
1. 在待办事项列表中，点击待办项右侧的 **🕐 提醒按钮**
2. 在弹出的对话框中：
   - 点击 **"选择日期"** 选择提醒日期
   - 点击 **"选择时间"** 选择提醒时间（精确到分钟）
3. 点击 **"确定"** 保存提醒设置

#### 重要说明：
- ⏰ 系统会在设定时间**提前 10 分钟**发送通知提醒
- ✅ 完成待办事项后，提醒会自动取消
- 🗑️ 删除待办事项后，提醒也会自动取消
- 📱 需要在系统设置中允许应用发送通知权限

#### 时间格式：
```
yyyy-MM-dd HH:mm
例如：2026-01-15 14:30
```

---

### 2. 桌面小工具（Widget）

#### 如何添加到主屏幕：
1. 长按手机主屏幕空白区域
2. 选择 **"小工具"** 或 **"Widgets"**
3. 查找并点击 **"MiniTodo"** 或 **"com.example.minitodo"**
4. 选择添加到主屏幕
5. 点击小工具打开应用

#### 小工具功能：
- 📝 快速打开待办应用
- 🔄 每 30 分钟自动更新一次
- 🎨 美观的应用品牌展示

---

### 3. 分类管理增强

#### 编辑分类名称：
1. 在分类列表中，**长按要编辑的分类**
2. 在弹出对话框中输入新的分类名称
3. 点击 **"确定"** 保存更改

#### 删除分类：
1. 在分类列表中，点击分类右侧的 **🗑️ 删除按钮**
2. 点击 **"确定"** 确认删除
3. ⚠️ 分类被删除后，该分类下的待办事项会保留但变为"未分类"

#### 分类颜色：
- 每个分类都有独特的颜色标识
- 在分类列表中可以清晰地看到颜色区分
- 待办事项上也会显示所属分类的颜色标签

---

### 4. 待办事项操作增强

#### 新增提醒按钮：
在每个待办事项的右侧，现在显示两个按钮：
- **🕐 提醒按钮** - 设置或编辑提醒时间
- **🗑️ 删除按钮** - 删除待办事项

#### 提醒时间显示：
- 已设置提醒的项目会在下方显示 **提醒时间**
- 🟠 橙色显示：表示提醒时间已到达
- 🔵 蓝色显示：表示提醒时间未到达

---

## 📋 权限申请

### Android 13+ (API 33+) 通知权限：
首次使用提醒功能时，应用会请求通知权限。
- 点击 **"允许"** 以接收提醒通知
- 如果拒绝，可以在系统设置 > 应用通知中手动启用

### 闹钟权限：
系统会自动申请 `SCHEDULE_EXACT_ALARM` 权限用于精确提醒。

---

## 🔧 技术细节

### 提醒实现原理：
1. **AlarmManager** - 系统级闹钟管理
2. **BroadcastReceiver** - 接收闹钟事件
3. **Notification API** - 显示系统通知
4. **Room Database** - 持久化提醒数据

### Widget 实现原理：
1. **AppWidgetProvider** - Widget 生命周期管理
2. **RemoteViews** - Widget UI 渲染
3. **Intent** - Widget 与应用通信

---

## ⚠️ 常见问题

### Q: 为什么没有收到提醒通知？
**A:** 请检查：
1. 应用是否有通知权限（设置 > 应用 > MiniTodo > 通知）
2. 系统是否处于勿扰模式
3. 提醒时间是否已正确设置（查看列表中的提醒时间显示）

### Q: 删除分类后待办事项怎么办？
**A:** 删除分类**不会**删除其下的待办事项，待办事项会变为"未分类"状态，可以重新分配到其他分类。

### Q: 小工具不更新怎么办？
**A:** 
1. 尝试长按小工具并重新添加
2. 检查应用是否在设置中被限制后台活动
3. 手动打开应用以触发更新

### Q: 能否修改提醒的提前时间？
**A:** 当前版本固定为提前 10 分钟。如需自定义，可在 `AlarmUtils.kt` 中修改以下代码：
```kotlin
calendar.add(Calendar.MINUTE, -10)  // 修改 -10 为其他分钟数
```

---

## 📱 系统要求

- **最低 Android 版本**：Android 6.0 (API 23)
- **目标 Android 版本**：Android 15 (API 36)
- **推荐版本**：Android 12 及以上

---

## 🎯 使用场景示例

### 场景 1：日常工作提醒
1. 创建待办：`完成季度报告`，分类：`工作`
2. 设置提醒：`2026-02-01 17:00`（下午 5 点）
3. 系统会在下午 4:50 提醒你

### 场景 2：分类管理
1. 创建分类：`个人`、`工作`、`购物`
2. 为不同类别的待办项分配不同分类
3. 长按分类可编辑名称
4. 在小工具中快速查看

### 场景 3：紧急任务处理
1. 创建待办：`紧急修复 Bug`，分类：`工作`
2. 设置提醒为当前时间的 10 分钟后
3. 接收紧急通知提醒

---

## 💡 最佳实践

1. **定期清理已完成的任务**
   - 及时删除已完成的待办项保持列表整洁

2. **合理使用分类**
   - 为不同领域的任务创建分类
   - 定期审查和合并相似的分类

3. **设置合理的提醒时间**
   - 避免设置太多相同时间的提醒
   - 为重要任务设置较早的提醒时间

4. **定期备份**
   - 应用数据存储在本地 SQLite 数据库
   - 建议定期导出重要数据

---

## 📞 反馈和支持

如遇到任何问题或有改进建议，请：
1. 查看本指南中的 **常见问题** 部分
2. 检查应用日志（使用 Android Studio 的 Logcat）
3. 参考 **优化报告** 了解技术细节

---

**祝您使用愉快！** 🎉
